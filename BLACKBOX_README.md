 # Choriste Notification System

This Node.js application uses the `cron` library to send automated notifications to choristers about upcoming rehearsals. It features a simple yet effective mechanism to remind choristers of their rehearsals, ensuring they stay informed and engaged.

## Installation

To set up the notification system, follow these steps:

1. Install the necessary dependencies:

```bash
npm install node-cron
```

2. Import the required modules:

```javascript
const cron = require("node-cron");
const choriste = require("../models/choriste");
```

## Usage

The `envoyerNotification` function is the entry point for sending notifications. It takes a single parameter, `repetitions`, which specifies the number of times the notification should be sent.

Here's a breakdown of the function:

```javascript
const envoyerNotification = (req, res) => {
  let count = 0;
  const repetitions = req.params.repetitions;
```

- `count` is a variable that keeps track of the number of times the notification has been sent.
- `repetitions` is the number of times the notification should be sent, as specified in the request.

```javascript
  const task = cron.schedule(
    "* * * * * *",
    () => {
      count++;
      console.log(
        `Rappelez-vous ! vous avez une répétition le ..... (fois ${count}/${repetitions})`
      );
      if (count === repetitions) {
        task.stop(); // Arrête la tâche une fois que le nombre de répétitions est atteint
        count = 0;
      }
    },
    {
      scheduled: false, // Empêche l'exécution immédiate de la tâche après la planification
    }
  );
```

- `cron.schedule` is used to create a scheduled task that will run every minute.
- The callback function inside `cron.schedule` is what actually sends the notification. It increments the `count` variable and logs a message to the console indicating that a notification has been sent.
- If the `count` variable reaches the specified number of repetitions, the task is stopped and the `count` variable is reset to 0.

```javascript
  task.start(); // Démarre la tâche planifiée
};
```

- Finally, the `task.start()`

Generated by [BlackboxAI](https://www.blackbox.ai)